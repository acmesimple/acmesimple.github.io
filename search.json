[{"title":"网站建设方案书","url":"http://www.ternc.cn/2020/04/20/网站建设方案书/","content":"<h1 id=\"网站建设方案书\"><a href=\"#网站建设方案书\" class=\"headerlink\" title=\"网站建设方案书\"></a>网站建设方案书</h1><h3 id=\"一-网站内容及栏目介绍\"><a href=\"#一-网站内容及栏目介绍\" class=\"headerlink\" title=\"一.网站内容及栏目介绍\"></a>一.网站内容及栏目介绍</h3><ul>\n<li><p>首页设计效果</p>\n<p><img src=\"C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200416115608079.png\" alt=\"image-20200416115608079\"></p>\n</li>\n<li><p>栏目说明</p>\n<ol>\n<li><p>博客：网站主要功能，展示个人博客文章信息</p>\n<p><img src=\"C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200416115638728.png\" alt=\"image-20200416115638728\"></p>\n<p><img src=\"C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200416115910686.png\" alt=\"image-20200416115910686\"></p>\n</li>\n<li><p>项目：个人开源项目介绍</p>\n<p><img src=\"C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200416115702277.png\" alt=\"image-20200416115702277\"></p>\n</li>\n<li><p>关于：个人信息展示</p>\n<p><img src=\"C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200416115721276.png\" alt=\"image-20200416115721276\"></p>\n</li>\n<li><p>搜索：博客文章搜索功能</p>\n<p><img src=\"C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200416115742693.png\" alt=\"image-20200416115742693\"></p>\n</li>\n<li><p>友链：友情链接</p>\n<p><img src=\"C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200416115830711.png\" alt=\"image-20200416115830711\"></p>\n</li>\n<li><p>Github: 跳转到Github个人主页</p>\n</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"二-人员及资金安排\"><a href=\"#二-人员及资金安排\" class=\"headerlink\" title=\"二.人员及资金安排\"></a>二.人员及资金安排</h3><ul>\n<li><p>人员安排</p>\n<ul>\n<li>网站设计、开发、维护均有自己独立完成</li>\n</ul>\n</li>\n<li><p>资金预算</p>\n<ul>\n<li>服务器费用：使用Gitpage免费静态页面空间</li>\n<li>域名费用：30元/年</li>\n<li>数据库：采用leancloud免费数据库</li>\n</ul>\n</li>\n<li><p>总预算：30元/年</p>\n</li>\n</ul>\n<h3 id=\"三-内容管理制度\"><a href=\"#三-内容管理制度\" class=\"headerlink\" title=\"三.内容管理制度\"></a>三.内容管理制度</h3><ul>\n<li>内容发布制度<ul>\n<li>网站内容均由自己发布，不允许第三人发布。</li>\n<li>不转载、不发布违法信息及不良信息，仅作技术心得存档、分享使用</li>\n</ul>\n</li>\n<li>内容评论管理制度<ul>\n<li>评论信息集中管理：所有评论统一集中到leancloud免费数据库管理。</li>\n<li>评论内容审核机制：未经审核评论不允许直接显示到评论区。</li>\n<li>评论事件邮件通知机制：网站有新评论，评论内容通过邮件发送给管理员，便于管理员第一时间审核评论信息。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"四-网络部署方案\"><a href=\"#四-网络部署方案\" class=\"headerlink\" title=\"四.网络部署方案\"></a>四.网络部署方案</h3><ul>\n<li>使用Markdown本地编写网站及博文信息</li>\n<li>使用Hexo编译网站为静态网页</li>\n<li>使用Hexo推送静态网页到Gitpage</li>\n<li>域名Cname到Gitpage</li>\n<li>网站部署完成</li>\n</ul>\n<h3 id=\"五-网络信息安全技术措施\"><a href=\"#五-网络信息安全技术措施\" class=\"headerlink\" title=\"五.网络信息安全技术措施\"></a>五.网络信息安全技术措施</h3><ul>\n<li>由于网站托管于Gitpage,信息安全有Gitpage维护处理</li>\n</ul>\n<h3 id=\"六-应急处置方案\"><a href=\"#六-应急处置方案\" class=\"headerlink\" title=\"六.应急处置方案\"></a>六.应急处置方案</h3><ul>\n<li>网站被攻击或存在不合理内容处理方案<ul>\n<li>删除域名解析记录，暂停网站内容展示</li>\n<li>自己查找并修复或整改</li>\n<li>待网站处理得当重新解析到服务器，提供网站展示功能</li>\n</ul>\n</li>\n</ul>\n","categories":[],"tags":[]},{"title":"linux下代理服务器搭建之tinyproxy","url":"http://www.ternc.cn/2020/04/05/tinyproxy代理服务器搭建/","content":"<h3 id=\"tinyproxy安装\"><a href=\"#tinyproxy安装\" class=\"headerlink\" title=\"tinyproxy安装\"></a>tinyproxy安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install tinyproxy</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/tinyproxy/tinyproxy.conf</span><br><span class=\"line\"></span><br><span class=\"line\">port 4396 <span class=\"comment\">#监听4396端口</span></span><br><span class=\"line\"><span class=\"comment\"># Allow 127.0.0.1 #注释掉Allow 允许所有IP访问</span></span><br><span class=\"line\">iptables -I INPUT -p tcp --dport 4396 -j ACCEPT <span class=\"comment\">#iptables 开放4396端口</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service tinyproxy start\t<span class=\"comment\">#启动代理服务</span></span><br><span class=\"line\">service tinyproxy stop\t<span class=\"comment\">#停止代理服务</span></span><br><span class=\"line\">service tinyproxy restart <span class=\"comment\">#重启代理服务</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"测试代理\"><a href=\"#测试代理\" class=\"headerlink\" title=\"测试代理\"></a>测试代理</h3><p>本地cmd测试</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl www.baidu.com --proxy YOUIP:4396</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"经验\"><a href=\"#经验\" class=\"headerlink\" title=\"经验\"></a>经验</h3><p>香港服务器代理程序，提示 接收失败：链接已被重置。猜测原因可能是被墙了</p>\n","categories":["linux"],"tags":["代理"]},{"title":"nodejs搭建简单API服务器","url":"http://www.ternc.cn/2020/04/03/nodejs搭建简单API服务器/","content":"<h3 id=\"serv-js\"><a href=\"#serv-js\" class=\"headerlink\" title=\"serv.js\"></a>serv.js</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> https=<span class=\"built_in\">require</span>(<span class=\"string\">\"https\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> http=<span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> url=<span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs=<span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</span><br><span class=\"line\">ac=&#123;&#125;;<span class=\"comment\">//定义全局对象AC</span></span><br><span class=\"line\">ac.inf=<span class=\"built_in\">require</span>(<span class=\"string\">\"./conf.json\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//响应处理、路由功能</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">rephandle</span>(<span class=\"params\">model,controler,para,rep</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//执行</span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> file_name=__dirname+<span class=\"string\">\"/\"</span>+model+<span class=\"string\">\".js\"</span>;<span class=\"comment\">//拼接模块文件名</span></span><br><span class=\"line\">\tfs.stat(file_name,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,stat</span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(stat&amp;&amp;stat.isFile())&#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//模块存在</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">var</span> vm=<span class=\"built_in\">require</span>(file_name);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(vm[controler])&#123;</span><br><span class=\"line\"><span class=\"meta\">                \"use strict\"</span></span><br><span class=\"line\">                vm[controler](para);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t\trep.end(<span class=\"string\">\"Controler不存在\"</span>);</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\trep.end(<span class=\"string\">\"Model不存在\"</span>);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//请求处理函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reqhandle</span>(<span class=\"params\">req,rep</span>)</span>&#123;</span><br><span class=\"line\">\tac.req=req;<span class=\"comment\">//定义全局请求变量</span></span><br><span class=\"line\">\tac.rep=rep;<span class=\"comment\">//定义全局响应变量</span></span><br><span class=\"line\">\tac.end=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ele</span>)</span>&#123;ac.rep.end((<span class=\"keyword\">typeof</span> ele==<span class=\"string\">'string'</span>)?ele:<span class=\"built_in\">JSON</span>.stringify(ele,<span class=\"literal\">null</span>,<span class=\"string\">\"\\t\"</span>));&#125;</span><br><span class=\"line\">\tac.write=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ele</span>)</span>&#123;ac.rep.write((<span class=\"keyword\">typeof</span> ele==<span class=\"string\">'string'</span>)?ele:<span class=\"built_in\">JSON</span>.stringify(ele,<span class=\"literal\">null</span>,<span class=\"string\">\"\\t\"</span>));&#125;</span><br><span class=\"line\">\trep.writeHead(<span class=\"number\">200</span>,&#123;<span class=\"string\">\"Content-Type\"</span>:<span class=\"string\">\"text/plain;charset=utf-8\"</span>&#125;);</span><br><span class=\"line\">\t<span class=\"comment\">//异常处理,注:此处需PM2 配置为exec_mode: \"cluster_mode\" 集群模式</span></span><br><span class=\"line\">\tprocess.on(<span class=\"string\">'uncaughtException'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</span><br><span class=\"line\">\t\trep.end(err.stack);</span><br><span class=\"line\">\t\tprocess.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> pathname=url.parse(req.url).pathname.split(<span class=\"string\">\"/\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(pathname[<span class=\"number\">1</span>]&amp;&amp;pathname[<span class=\"number\">2</span>])&#123;<span class=\"comment\">//api接口调用</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//接收请求参数</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> para=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(req.method.toUpperCase()==<span class=\"string\">'POST'</span>)&#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//接收post参数</span></span><br><span class=\"line\">\t\t\treq.on(<span class=\"string\">\"data\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">buff</span>)</span>&#123;</span><br><span class=\"line\">\t\t\t\tpara+=buff;</span><br><span class=\"line\">\t\t\t&#125;);</span><br><span class=\"line\">\t\t\treq.on(<span class=\"string\">\"end\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">                para=para?<span class=\"built_in\">JSON</span>.parse(para):&#123;&#125;;</span><br><span class=\"line\">\t\t\t\trephandle(pathname[<span class=\"number\">1</span>],pathname[<span class=\"number\">2</span>],para,rep);</span><br><span class=\"line\">\t\t\t&#125;);</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(req.method.toUpperCase()==<span class=\"string\">'GET'</span>)&#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//接收get参数</span></span><br><span class=\"line\">\t\t\tpara=url.parse(req.url,<span class=\"literal\">true</span>).query;</span><br><span class=\"line\">\t\t\trephandle(pathname[<span class=\"number\">1</span>],pathname[<span class=\"number\">2</span>],para,rep);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span>&#123;<span class=\"comment\">//ssl证书验证</span></span><br><span class=\"line\">\t\trep.end(ac.inf.ssl_str);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Acme启动程序</span></span><br><span class=\"line\">exports.run=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//创建数据库链接池</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> mongodb=<span class=\"built_in\">require</span>(<span class=\"string\">'mongodb'</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> MongoClient=mongodb.MongoClient;</span><br><span class=\"line\">\tac.toId=mongodb.ObjectId;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> auth_str=(ac.inf.db.user&amp;&amp;ac.inf.db.pwd)?ac.inf.db.user+<span class=\"string\">\":\"</span>+ac.inf.db.pwd+<span class=\"string\">\"@\"</span>:<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> ul=<span class=\"string\">\"mongodb://\"</span>+auth_str+ac.inf.db.url+<span class=\"string\">\":\"</span>+ac.inf.db.port+<span class=\"string\">\"/\"</span>+ac.inf.db.name;</span><br><span class=\"line\">\t<span class=\"comment\">//数据库连接</span></span><br><span class=\"line\">\tMongoClient.connect(ul,&#123;<span class=\"attr\">useNewUrlParser</span>:<span class=\"literal\">true</span>,<span class=\"attr\">useUnifiedTopology</span>:<span class=\"literal\">true</span>&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,database</span>)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err;</span><br><span class=\"line\">\t\tac.db=database.db(ac.inf.db.name);<span class=\"comment\">//定义全局数据库连接变量</span></span><br><span class=\"line\">\t\tac.dbc=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">col</span>)</span>&#123;<span class=\"keyword\">return</span> ac.db.collection(col)&#125;;<span class=\"comment\">//定义全局数据库连接变量</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//ssl证书读取</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> credentials=&#123;</span><br><span class=\"line\">\t\t\tkey:fs.readFileSync(__dirname+<span class=\"string\">'/cert/private.pem'</span>,<span class=\"string\">'utf8'</span>),</span><br><span class=\"line\">\t\t\tcert:fs.readFileSync(__dirname+<span class=\"string\">'/cert/file.crt'</span>,<span class=\"string\">'utf8'</span>)</span><br><span class=\"line\">\t\t&#125;;</span><br><span class=\"line\">\t\thttps.createServer(credentials,reqhandle).listen(<span class=\"number\">443</span>);<span class=\"comment\">//启动https服务器</span></span><br><span class=\"line\">\t\thttp.createServer(reqhandle).listen(<span class=\"number\">80</span>);<span class=\"comment\">//启动http服务器</span></span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">exports.run();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"测试模块-demo-js\"><a href=\"#测试模块-demo-js\" class=\"headerlink\" title=\"测试模块 demo.js\"></a>测试模块 demo.js</h3><p>访问路径：<a href=\"http://youdomain/demo/test?a=1\" target=\"_blank\" rel=\"noopener\">http://youdomain/demo/test?a=1</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    test(para) &#123;</span><br><span class=\"line\">        ac.end(<span class=\"string\">\"hello world~~\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"conf-json-配置文件\"><a href=\"#conf-json-配置文件\" class=\"headerlink\" title=\"conf.json 配置文件\"></a>conf.json 配置文件</h3><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"db\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"url\"</span>: <span class=\"string\">\"127.0.0.1\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"port\"</span>: <span class=\"number\">27017</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>: <span class=\"string\">\"username\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"pwd\"</span>: <span class=\"string\">\"pwd\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"collectionName\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">\"wx\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"appid\"</span>: <span class=\"string\">\"appid\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"secret\"</span>: <span class=\"string\">\"secret\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">\"qiniu\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"ak\"</span>: <span class=\"string\">\"ak\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"sk\"</span>: <span class=\"string\">\"sk-G8hDTynIGO0cOmUg\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"scope\"</span>: <span class=\"string\">\"scope\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">\"ssl_bak\"</span>: <span class=\"string\">\"ssl_bak\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"ssl_str\"</span>: <span class=\"string\">\"欢迎进入ACME\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":["nodejs"],"tags":["nodejs"]},{"title":"yacc/lex语法学习之制作计算器","url":"http://www.ternc.cn/2020/04/03/yacc-lex语法学习之制作计算器/","content":"<h3 id=\"mycal-l\"><a href=\"#mycal-l\" class=\"headerlink\" title=\"mycal.l\"></a>mycal.l</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">%&#123;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">\"y.tab.h\"</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">yywrap</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">1</span>;&#125;</span><br><span class=\"line\">%&#125;</span><br><span class=\"line\">%%</span><br><span class=\"line\"><span class=\"string\">\"+\"</span>             <span class=\"keyword\">return</span> ADD;</span><br><span class=\"line\"><span class=\"string\">\"-\"</span>             <span class=\"keyword\">return</span> SUB;</span><br><span class=\"line\"><span class=\"string\">\"*\"</span>             <span class=\"keyword\">return</span> MUL;</span><br><span class=\"line\"><span class=\"string\">\"/\"</span>             <span class=\"keyword\">return</span> DIV;</span><br><span class=\"line\"><span class=\"string\">\"\\n\"</span>            <span class=\"keyword\">return</span> CR;</span><br><span class=\"line\">([<span class=\"number\">1</span><span class=\"number\">-9</span>][<span class=\"number\">0</span><span class=\"number\">-9</span>]*)|<span class=\"number\">0</span>|([<span class=\"number\">0</span><span class=\"number\">-9</span>]+\\.[<span class=\"number\">0</span><span class=\"number\">-9</span>]*) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">double</span> temp;</span><br><span class=\"line\">    <span class=\"built_in\">sscanf</span>(yytext, <span class=\"string\">\"%lf\"</span>, &amp;temp);<span class=\"comment\">// %lf 双精度 %f单精度</span></span><br><span class=\"line\">    yylval.double_value = temp;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DOUBLE_LITERAL;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">. &#123;</span><br><span class=\"line\">    <span class=\"built_in\">fprintf</span>(<span class=\"built_in\">stderr</span>, <span class=\"string\">\"input err\\n\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">%%</span><br></pre></td></tr></table></figure>\n<h3 id=\"mycal-y\"><a href=\"#mycal-y\" class=\"headerlink\" title=\"mycal.y\"></a>mycal.y</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">%&#123;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> YYDEBUG 1</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">yyerror</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">yylex</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">%&#125;</span><br><span class=\"line\">%<span class=\"keyword\">union</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>          int_value;</span><br><span class=\"line\">    <span class=\"keyword\">double</span>       double_value;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">%token &lt;double_value&gt;      DOUBLE_LITERAL</span><br><span class=\"line\">%token ADD SUB MUL DIV CR</span><br><span class=\"line\">%type &lt;double_value&gt; expression term </span><br><span class=\"line\">%%</span><br><span class=\"line\">line_list</span><br><span class=\"line\">    :<span class=\"built_in\">line</span></span><br><span class=\"line\">    |line_list <span class=\"built_in\">line</span></span><br><span class=\"line\"><span class=\"built_in\">line</span></span><br><span class=\"line\">    : expression CR</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"res:%lf\\n\"</span>, $<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">expression</span><br><span class=\"line\">    : term</span><br><span class=\"line\">    | expression ADD term</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        $$ = $<span class=\"number\">1</span> + $<span class=\"number\">3</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    | expression SUB term</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        $$ = $<span class=\"number\">1</span> - $<span class=\"number\">3</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ;</span><br><span class=\"line\">term</span><br><span class=\"line\">    : DOUBLE_LITERAL</span><br><span class=\"line\">    | term MUL DOUBLE_LITERAL </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        $$ = $<span class=\"number\">1</span> * $<span class=\"number\">3</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    | term DIV DOUBLE_LITERAL</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        $$ = $<span class=\"number\">1</span> / $<span class=\"number\">3</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ;</span><br><span class=\"line\">           </span><br><span class=\"line\">%%</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">yyerror</span><span class=\"params\">(<span class=\"keyword\">char</span> <span class=\"keyword\">const</span> *str)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">extern</span> <span class=\"keyword\">char</span> *yytext;</span><br><span class=\"line\">    <span class=\"built_in\">fprintf</span>(<span class=\"built_in\">stderr</span>, <span class=\"string\">\"parser error near %s\\n\"</span>, yytext);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">extern</span> <span class=\"keyword\">int</span> <span class=\"title\">yyparse</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>; <span class=\"comment\">//extern 外置函数或变量</span></span><br><span class=\"line\">    <span class=\"keyword\">extern</span> FILE *yyin;</span><br><span class=\"line\"></span><br><span class=\"line\">    yyin = <span class=\"built_in\">stdin</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (yyparse()) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">fprintf</span>(<span class=\"built_in\">stderr</span>, <span class=\"string\">\"Error ! Error ! Error !\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"bash\"><a href=\"#bash\" class=\"headerlink\" title=\"bash\"></a>bash</h3><blockquote>\n<p>windows平台</p>\n</blockquote>\n<blockquote>\n<p>bison 、flex </p>\n</blockquote>\n<blockquote>\n<p>编译器: tcc</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bison --yacc -d mycalc.y</span><br><span class=\"line\">flex mycalc.l</span><br><span class=\"line\">tcc y.tab.c lex.yy.c</span><br></pre></td></tr></table></figure>","categories":["编译相关"],"tags":["编译"]},{"title":"nodejs简单进程守护示例","url":"http://www.ternc.cn/2020/04/03/nodejs简单进程守护示例/","content":"<ul>\n<li>仅供学习研究，生产环境建议使用PM2进程守护<h3 id=\"sh-js\"><a href=\"#sh-js\" class=\"headerlink\" title=\"sh.js\"></a>sh.js</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> &#123; spawn &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'child_process'</span>),child;</span><br><span class=\"line\">sh();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sh</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\tchild = spawn(<span class=\"string\">'node'</span>, [<span class=\"string\">'test.js'</span>], &#123; <span class=\"attr\">stdio</span>: [<span class=\"string\">'inherit'</span>] &#125;); \t <span class=\"comment\">//子进程调用test.js</span></span><br><span class=\"line\">\tchild.stdout.on(<span class=\"string\">'data'</span>, (data) =&gt; &#123;              <span class=\"comment\">//监听子进程的输出信息，并打印出来</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;data&#125;</span>`</span>);</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">\tchild.on(<span class=\"string\">'close'</span>, (code) =&gt; &#123;                        <span class=\"comment\">//监听test.js脚本退出事件</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'\\n'</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">`test.js进程异常终止，退出码<span class=\"subst\">$&#123;code&#125;</span>`</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'\\n'</span>);</span><br><span class=\"line\">\t\tsh();</span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"test-js\"><a href=\"#test-js\" class=\"headerlink\" title=\"test.js\"></a>test.js</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'这里是test.js,三秒后退出'</span>);</span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    qwe();\t<span class=\"comment\">//此处的qwe函数没有定义过，所以执行到这里时，脚本会停止运行</span></span><br><span class=\"line\">&#125;, <span class=\"number\">3000</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"bash\"><a href=\"#bash\" class=\"headerlink\" title=\"bash\"></a>bash</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node sh.js</span><br></pre></td></tr></table></figure></li>\n</ul>\n","categories":["nodejs"],"tags":["进程守护"]},{"title":"nodejs编写代理服务器（不完美版）","url":"http://www.ternc.cn/2020/04/03/nodejs编写代理服务器（不完美版）/","content":"<p>不完美版本，仅用于学习，哈哈哈，有时间在更新吧~~</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> proxy = &#123;</span><br><span class=\"line\">    run(port) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> net = <span class=\"built_in\">require</span>(<span class=\"string\">\"net\"</span>)</span><br><span class=\"line\">        process.on(<span class=\"string\">'uncaughtException'</span>, <span class=\"built_in\">console</span>.log);</span><br><span class=\"line\">        net.createServer(<span class=\"function\">(<span class=\"params\">client</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            client.on(<span class=\"string\">\"data\"</span>, (data) =&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">let</span> req = proxy.reqParse(data)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!req) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">let</span> server = net.createConnection(req.port, req.host);</span><br><span class=\"line\">                client.removeAllListeners(<span class=\"string\">'data'</span>);</span><br><span class=\"line\">                client.pipe(server).pipe(client);</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (req.method == <span class=\"string\">'CONNECT'</span>)</span><br><span class=\"line\">                    client.write(<span class=\"string\">\"HTTP/1.1 200 Connection established\\r\\nConnection: close\\r\\n\\r\\n\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">else</span></span><br><span class=\"line\">                    server.write(req.buffer);</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;).listen(port, () =&gt; &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">\"prox running at port:\"</span> + port)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    reqParse(b) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> s = b.toString(<span class=\"string\">'utf8'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">let</span> method = s.split(<span class=\"string\">'\\n'</span>)[<span class=\"number\">0</span>].match(<span class=\"regexp\">/^([A-Z]+)\\s/</span>)[<span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (method == <span class=\"string\">'CONNECT'</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> arr = s.match(<span class=\"regexp\">/^([A-Z]+)\\s([^\\:\\s]+)\\:(\\d+)\\sHTTP\\/(\\d\\.\\d)/</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (arr &amp;&amp; arr[<span class=\"number\">1</span>] &amp;&amp; arr[<span class=\"number\">2</span>] &amp;&amp; arr[<span class=\"number\">3</span>] &amp;&amp; arr[<span class=\"number\">4</span>])</span><br><span class=\"line\">                <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                    method: arr[<span class=\"number\">1</span>],</span><br><span class=\"line\">                    host: arr[<span class=\"number\">2</span>],</span><br><span class=\"line\">                    port: arr[<span class=\"number\">3</span>],</span><br><span class=\"line\">                    httpVersion: arr[<span class=\"number\">4</span>],</span><br><span class=\"line\">                    buffer: b</span><br><span class=\"line\">                &#125;;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> arr = s.match(<span class=\"regexp\">/^([A-Z]+)\\s([^\\s]+)\\sHTTP\\/(\\d\\.\\d)/</span>);</span><br><span class=\"line\">            <span class=\"keyword\">let</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"comment\">//请求头，请求体处理</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, len = b.length - <span class=\"number\">3</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (b[i] == <span class=\"number\">0x0d</span> &amp;&amp; b[i + <span class=\"number\">1</span>] == <span class=\"number\">0x0a</span> &amp;&amp; b[i + <span class=\"number\">2</span>] == <span class=\"number\">0x0d</span> &amp;&amp; b[i + <span class=\"number\">3</span>] == <span class=\"number\">0x0a</span>) &#123;</span><br><span class=\"line\">                    index = i + <span class=\"number\">4</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!index) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> header = b.slice(<span class=\"number\">0</span>, index).toString(<span class=\"string\">'utf8'</span>);</span><br><span class=\"line\">            <span class=\"comment\">//替换connection头</span></span><br><span class=\"line\">            header = header.replace(<span class=\"regexp\">/(proxy\\-)?connection\\:.+\\r\\n/ig</span>, <span class=\"string\">''</span>)</span><br><span class=\"line\">                .replace(<span class=\"regexp\">/Keep\\-Alive\\:.+\\r\\n/i</span>, <span class=\"string\">''</span>)</span><br><span class=\"line\">                .replace(<span class=\"string\">\"\\r\\n\"</span>, <span class=\"string\">'\\r\\nConnection: close\\r\\n'</span>);</span><br><span class=\"line\">            <span class=\"comment\">//替换网址格式(去掉域名部分)</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (arr[<span class=\"number\">1</span>] == <span class=\"string\">'1.1'</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> url = arr[<span class=\"number\">2</span>].replace(<span class=\"regexp\">/http\\:\\/\\/[^\\/]+/</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (arr[<span class=\"number\">2</span>] != url) header = header.replace(arr[<span class=\"number\">2</span>], url);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            b = Buffer.concat([Buffer.from(header), b.slice(index)]);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (arr &amp;&amp; arr[<span class=\"number\">1</span>] &amp;&amp; arr[<span class=\"number\">2</span>] &amp;&amp; arr[<span class=\"number\">3</span>]) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> host = s.match(<span class=\"regexp\">/Host\\:\\s+([^\\n\\s\\r]+)/</span>)[<span class=\"number\">1</span>];</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (host) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">var</span> _p = host.split(<span class=\"string\">':'</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                        method: arr[<span class=\"number\">1</span>],</span><br><span class=\"line\">                        host: _p[<span class=\"number\">0</span>],</span><br><span class=\"line\">                        port: _p[<span class=\"number\">1</span>] ? _p[<span class=\"number\">1</span>] : <span class=\"number\">80</span>,</span><br><span class=\"line\">                        path: arr[<span class=\"number\">2</span>],</span><br><span class=\"line\">                        httpVersion: arr[<span class=\"number\">3</span>],</span><br><span class=\"line\">                        buffer: b</span><br><span class=\"line\">                    &#125;;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">proxy.run(<span class=\"number\">86</span>)</span><br></pre></td></tr></table></figure>","categories":["nodejs"],"tags":["代理"]},{"title":"linux常用命令","url":"http://www.ternc.cn/2019/04/03/liunx常用命令/","content":"<h2 id=\"Linux命令\"><a href=\"#Linux命令\" class=\"headerlink\" title=\"Linux命令\"></a>Linux命令</h2><h3 id=\"windows如果需要运行末签名的脚本，使用管理员身份运行-PowerShell\"><a href=\"#windows如果需要运行末签名的脚本，使用管理员身份运行-PowerShell\" class=\"headerlink\" title=\"windows如果需要运行末签名的脚本，使用管理员身份运行 PowerShell\"></a>windows如果需要运行末签名的脚本，使用管理员身份运行 PowerShell</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">windows如果需要运行末签名的脚本，使用管理员身份运行 PowerShell</span><br></pre></td></tr></table></figure>\n<h3 id=\"nvm-node-安装\"><a href=\"#nvm-node-安装\" class=\"headerlink\" title=\"nvm node 安装\"></a>nvm node 安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -qO- https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;creationix&#x2F;nvm&#x2F;v0.31.1&#x2F;install.sh | bash</span><br><span class=\"line\">source ~&#x2F;.bashrc</span><br><span class=\"line\">nvm ls-remote</span><br><span class=\"line\">nvm install 12.3.1</span><br><span class=\"line\">nvm use 12.3.1</span><br><span class=\"line\">nvm ls</span><br><span class=\"line\">npm install -g cnpm -registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure>\n<h3 id=\"pm2-安装\"><a href=\"#pm2-安装\" class=\"headerlink\" title=\"pm2 安装\"></a>pm2 安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g pm2</span><br></pre></td></tr></table></figure>\n<h3 id=\"mongodb安装\"><a href=\"#mongodb安装\" class=\"headerlink\" title=\"mongodb安装\"></a>mongodb安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -O https:&#x2F;&#x2F;fastdl.mongodb.org&#x2F;linux&#x2F;mongodb-linux-x86_64-3.0.6.tgz # 下载</span><br><span class=\"line\">tar -zxvf mongodb-linux-x86_64-3.0.6.tgz</span><br><span class=\"line\">mv mongodb-linux-x86_64-3.0.6&#x2F; &#x2F;usr&#x2F;local&#x2F;mongodb</span><br><span class=\"line\">rm -rf mongodb-linux-x86_64-3.0.6.tgz</span><br><span class=\"line\">#export PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;bin:$PATH #临时添加系统变量</span><br><span class=\"line\">mkdir -p &#x2F;data&#x2F;db</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;bin&#x2F;mongod #启动mongodb</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;bin&#x2F;mongod --fork --logpath &#x2F;var&#x2F;log&#x2F;mongod.log #后台运行</span><br></pre></td></tr></table></figure>\n<h3 id=\"mongodb设置用户\"><a href=\"#mongodb设置用户\" class=\"headerlink\" title=\"mongodb设置用户\"></a>mongodb设置用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.createUser( &#123;user: &quot;che&quot;,pwd: &quot;binbin&quot;,roles: [ &#123; role: &quot;userAdminAnyDatabase&quot;, db: &quot;zslm&quot; &#125; ]&#125;);</span><br><span class=\"line\">db.auth( &quot;che&quot;,&quot;binbin&quot;)</span><br><span class=\"line\"></span><br><span class=\"line\">use admin</span><br><span class=\"line\">db.system.users.remove(&#123;&#125;) #删除所有用户</span><br><span class=\"line\">use zslm #切换到数据库zslm，不存在就创建</span><br><span class=\"line\">db.createUser(&#123;user:&quot;che&quot;,pwd:&quot;binbin&quot;,roles:[&quot;readWrite&quot;,&quot;dbAdmin&quot;]&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"nginx安装\"><a href=\"#nginx安装\" class=\"headerlink\" title=\"nginx安装\"></a>nginx安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel #安装依赖</span><br><span class=\"line\">mkdir &#x2F;usr&#x2F;local&#x2F;nginx</span><br><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;nginx</span><br><span class=\"line\">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.17.6.tar.gz</span><br><span class=\"line\">tar -zxvf nginx-1.17.6.tar.gz</span><br><span class=\"line\">cd nginx-1.17.6</span><br><span class=\"line\">.&#x2F;configure #mak配置</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h3 id=\"nginx配置文件设置\"><a href=\"#nginx配置文件设置\" class=\"headerlink\" title=\"nginx配置文件设置\"></a>nginx配置文件设置</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf</span><br><span class=\"line\">#nginx启动&#x2F;停止&#x2F;重启</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -s stop</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -s reload</span><br></pre></td></tr></table></figure>\n<h3 id=\"其他命令\"><a href=\"#其他命令\" class=\"headerlink\" title=\"其他命令\"></a>其他命令</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias ls&#x3D;&#39;ls --color&#x3D;never&#39;#命令别名</span><br><span class=\"line\">init 0 #为关机</span><br><span class=\"line\">init 1 #为重启</span><br><span class=\"line\">shutdown #为关机</span><br><span class=\"line\">shutdown -r #为重启</span><br></pre></td></tr></table></figure>\n<h4 id=\"pm2命令\"><a href=\"#pm2命令\" class=\"headerlink\" title=\"pm2命令\"></a>pm2命令</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node &#x2F;www&#x2F;index.js</span><br><span class=\"line\">pm2 start &#x2F;www&#x2F;index.js -i 4 --watch --cwd&#x3D;&#x2F;www --name&#x3D;web</span><br><span class=\"line\">#PM2开机自启动项目</span><br><span class=\"line\">pm2 save # 保存当前应用列表</span><br><span class=\"line\">pm2 startup # 创建开机自启动命令</span><br><span class=\"line\">pm2 unstartup # 移除自启动</span><br><span class=\"line\">#windows 开机自动项目</span><br><span class=\"line\">npm install pm2-windows-startup -g</span><br><span class=\"line\">pm2-startup install</span><br><span class=\"line\"></span><br><span class=\"line\">pm2 resurrect # 重新加载保存的应用列表</span><br><span class=\"line\"></span><br><span class=\"line\">npm config set registry https:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;</span><br><span class=\"line\">electron_mirror&#x3D;https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;electron&#x2F;</span><br><span class=\"line\">netstat -lnp|grep 80</span><br></pre></td></tr></table></figure>\n<hr>\n\n<h2 id=\"git-命令\"><a href=\"#git-命令\" class=\"headerlink\" title=\"git 命令\"></a>git 命令</h2><h3 id=\"配置本地用户信息\"><a href=\"#配置本地用户信息\" class=\"headerlink\" title=\"配置本地用户信息\"></a>配置本地用户信息</h3><p>git config –global user.name “车彬彬”<br>git config –global user.email “<a href=\"mailto:908273149@qq.com\">908273149@qq.com</a>“</p>\n<h3 id=\"本地库操作\"><a href=\"#本地库操作\" class=\"headerlink\" title=\"本地库操作\"></a>本地库操作</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;commit modify&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"远程库相关\"><a href=\"#远程库相关\" class=\"headerlink\" title=\"远程库相关\"></a>远程库相关</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add zs https:&#x2F;&#x2F;e.coding.net&#x2F;jianyunkeji007&#x2F;zhensheng.git</span><br><span class=\"line\">git remote remove zs &#x2F;&#x2F; git rm remove zs</span><br><span class=\"line\">git pull zs master --allow-unrelated-histories</span><br><span class=\"line\">git config --global credential.helper store #存储ssh认证信息</span><br><span class=\"line\">git push zs master</span><br><span class=\"line\">git remote prune zs #同步远程和本地远程分支</span><br><span class=\"line\"></span><br><span class=\"line\">git pull zs master</span><br><span class=\"line\">git stash #贮藏</span><br><span class=\"line\">git push zs :init git push zs --delete init #删除远程分支</span><br><span class=\"line\">git checkout orther_branch_name git branch -D master #删除本地分支</span><br><span class=\"line\">重命名远程分支</span><br><span class=\"line\">git push zs --delete 崔银平</span><br><span class=\"line\">git branch -m 崔银平 cyp #重命名本地分支</span><br><span class=\"line\">git push zs cyp</span><br><span class=\"line\"></span><br><span class=\"line\">git config --system --unset credential.helper   #清除认证账号缓存信息</span><br></pre></td></tr></table></figure>","categories":["linux"],"tags":["linux"]},{"title":"hexo之fexo博客搭建","url":"http://www.ternc.cn/2019/04/02/hexo之fexo博客搭建/","content":"<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">cd</span> my-blog</span><br><span class=\"line\">$ git <span class=\"built_in\">clone</span> git@github.com:forsigner/fexo.git themes/fexo</span><br></pre></td></tr></table></figure>\n<h3 id=\"启用\"><a href=\"#启用\" class=\"headerlink\" title=\"启用\"></a>启用</h3><p>打开博客根目录的 _config.yml 设为 theme: fexo</p>\n<h3 id=\"升级\"><a href=\"#升级\" class=\"headerlink\" title=\"升级\"></a>升级</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">cd</span> themes/fexo</span><br><span class=\"line\">$ git commit -am ‘update’</span><br><span class=\"line\">$ git pull</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置主题\"><a href=\"#配置主题\" class=\"headerlink\" title=\"配置主题\"></a>配置主题</h3><p>主题配置全部在theme/fexo里面完成，所里下面所有配置指的是配置theme/fexo/_config.yml</p>\n<h3 id=\"设置基本信息\"><a href=\"#设置基本信息\" class=\"headerlink\" title=\"设置基本信息\"></a>设置基本信息</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blog_name: Forsigner</span><br><span class=\"line\">slogan: Find the bug of the world</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置头像\"><a href=\"#设置头像\" class=\"headerlink\" title=\"设置头像\"></a>设置头像</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">avatar: /images/avatar.jpg</span><br><span class=\"line\"><span class=\"comment\"># or absolute url</span></span><br><span class=\"line\">avatar: https://avatars0.githubusercontent.com/u/2668081?v=3&amp;s=460</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置favicon\"><a href=\"#设置favicon\" class=\"headerlink\" title=\"设置favicon\"></a>设置favicon</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">favicon: &#x2F;favicon.ico</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置SEO关键词\"><a href=\"#设置SEO关键词\" class=\"headerlink\" title=\"设置SEO关键词\"></a>设置SEO关键词</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keywords: forsigner,前端,设计,Hexo主题,前端开发,用户体验,设计,frontend,design,nodejs,JavaScript</span><br></pre></td></tr></table></figure>\n<h3 id=\"自定义博客名的字体\"><a href=\"#自定义博客名的字体\" class=\"headerlink\" title=\"自定义博客名的字体\"></a>自定义博客名的字体</h3><p>由于中文字体文件太大，有的快10M，所以 Fexo 没有引入中文字体，导致博客名有点难看。<br>但是可以通过提取字体来减小字体文件大小，让字体只有几KB。<br>一下步骤可以让你实现自定义博客名字体，包括英文和中文：</p>\n<ol>\n<li><p>下载免费可用的ttf格式字体</p>\n</li>\n<li><p>利用 Web-Fontmin 提取字体，然后下载 Web 字体和样式</p>\n</li>\n<li><p>在博客根目录的ssource文件夹新建两个子目录: fonts 和 css</p>\n</li>\n<li><p>把下载的字体方式fonts文件夹，把CSS文件放入css文件夹</p>\n</li>\n<li><p>修改theme/fexo/_config.yml：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">这是css文件里的font-familiy的值 ,例如里面是 font-familiy: “myfontName”</span><br><span class=\"line\">blog_name_font_familiy: myFontName</span><br><span class=\"line\"></span><br><span class=\"line\">fonts_css_path:</span><br><span class=\"line\">- &#x2F;css&#x2F;calligraffittiregular.css</span><br><span class=\"line\">- &#x2F;css&#x2F;second-font.css</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置首页内容\"><a href=\"#设置首页内容\" class=\"headerlink\" title=\"设置首页内容\"></a>设置首页内容</h3><p>你可以设置是否在首页直接显示文章</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">init_page_content: HOME_NAV  # HOME_NAV | POST</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置首页导航\"><a href=\"#设置首页导航\" class=\"headerlink\" title=\"设置首页导航\"></a>设置首页导航</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">home_nav:</span><br><span class=\"line\">    - name: Blog</span><br><span class=\"line\">    url: /archives</span><br><span class=\"line\">    - name: Github</span><br><span class=\"line\">    url: https://github.com/forsigner</span><br><span class=\"line\">    target: _blank</span><br><span class=\"line\">    - name: Douban</span><br><span class=\"line\">    url: http://www.douban.com/people/forsigner/</span><br><span class=\"line\">    target: _blank</span><br><span class=\"line\">    - name: Twitter</span><br><span class=\"line\">    url: https://twitter.com/forsigner</span><br><span class=\"line\">    target: _blank</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置页面导航\"><a href=\"#设置页面导航\" class=\"headerlink\" title=\"设置页面导航\"></a>设置页面导航</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">page_nav:</span><br><span class=\"line\">    - 博客: &#x2F;archives&#x2F;</span><br><span class=\"line\">    - 分类: &#x2F;category&#x2F;</span><br><span class=\"line\">    - 标签: &#x2F;tag&#x2F;</span><br><span class=\"line\">    - 友链: &#x2F;link&#x2F;</span><br><span class=\"line\">    - 关于: &#x2F;about&#x2F;</span><br><span class=\"line\">    - RSS: &#x2F;atom.xml</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置页面导航样式\"><a href=\"#设置页面导航样式\" class=\"headerlink\" title=\"设置页面导航样式\"></a>设置页面导航样式</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">page_nav_style: CIRCLE  # CIRCLE|ROUND_RECT</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置面包屑\"><a href=\"#设置面包屑\" class=\"headerlink\" title=\"设置面包屑\"></a>设置面包屑</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">breadcrumb:</span><br><span class=\"line\">    isShow: true # true|fase</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置盒子\"><a href=\"#设置盒子\" class=\"headerlink\" title=\"设置盒子\"></a>设置盒子</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">toolbox:</span><br><span class=\"line\">    isShow: true # true|fase</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置文章标题对齐方式\"><a href=\"#设置文章标题对齐方式\" class=\"headerlink\" title=\"设置文章标题对齐方式\"></a>设置文章标题对齐方式</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">post:</span><br><span class=\"line\">    header_align: center # left|center</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<hr/>\n\n<h3 id=\"启用分类页面\"><a href=\"#启用分类页面\" class=\"headerlink\" title=\"启用分类页面\"></a>启用分类页面</h3><ol>\n<li><p>在博客根目录执行 <code>hexo new page category</code></p>\n</li>\n<li><p>修改<code>my-blog/source/category/index.md</code>里面的内容:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">—</span><br><span class=\"line\">title: category</span><br><span class=\"line\">layout: category</span><br><span class=\"line\">comments: false</span><br><span class=\"line\">—</span><br></pre></td></tr></table></figure>\n<h3 id=\"启用标签页面\"><a href=\"#启用标签页面\" class=\"headerlink\" title=\"启用标签页面\"></a>启用标签页面</h3></li>\n<li><p>在博客根目录执行<code>hexo new page tag</code></p>\n</li>\n<li><p>修改<code>my-blog/source/tag/index.md</code>里面的内容:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">—</span><br><span class=\"line\">title: tag</span><br><span class=\"line\">layout: tag</span><br><span class=\"line\">comments: false</span><br><span class=\"line\">—</span><br></pre></td></tr></table></figure>\n<h3 id=\"启用友链页面\"><a href=\"#启用友链页面\" class=\"headerlink\" title=\"启用友链页面\"></a>启用友链页面</h3></li>\n<li><p>在博客根目录执行 <code>hexo new page link</code></p>\n</li>\n<li><p>修改<code>my-blog/source/tag/index.md</code>里面的内容:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">—</span><br><span class=\"line\">title: link</span><br><span class=\"line\">layout: link</span><br><span class=\"line\">comments: false</span><br><span class=\"line\">—</span><br></pre></td></tr></table></figure>\n<h3 id=\"启用关于页面\"><a href=\"#启用关于页面\" class=\"headerlink\" title=\"启用关于页面\"></a>启用关于页面</h3></li>\n<li><p>在博客根目录执行 <code>hexo new page about</code></p>\n</li>\n<li><p>修改<code>my-blog/source/about/index.md</code>里面的内容:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">—</span><br><span class=\"line\">title: about</span><br><span class=\"line\">layout: about</span><br><span class=\"line\">comments: false</span><br><span class=\"line\">—</span><br></pre></td></tr></table></figure>\n<h3 id=\"启用项目页面\"><a href=\"#启用项目页面\" class=\"headerlink\" title=\"启用项目页面\"></a>启用项目页面</h3></li>\n<li><p>在博客根目录执行 <code>hexo new page project</code></p>\n</li>\n<li><p>修改<code>my-blog/source/project/index.md</code>里面的内容:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">—</span><br><span class=\"line\">title: project</span><br><span class=\"line\">layout: project</span><br><span class=\"line\">comments: false</span><br><span class=\"line\">—</span><br></pre></td></tr></table></figure>\n<h3 id=\"启用搜索页面\"><a href=\"#启用搜索页面\" class=\"headerlink\" title=\"启用搜索页面\"></a>启用搜索页面</h3></li>\n<li><p>在博客根目录执行 <code>hexo new page search</code></p>\n</li>\n<li><p>修改<code>my-blog/source/search/index.md</code>里面的内容:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">—</span><br><span class=\"line\">title: search</span><br><span class=\"line\">layout: search</span><br><span class=\"line\">comments: false</span><br><span class=\"line\">—</span><br></pre></td></tr></table></figure></li>\n</ol>\n<ul>\n<li>然后安装 Hexo 插件 <code>hexo-search</code> (重要)<br>先进入 blog 的根目录<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cd my-blog</span><br><span class=\"line\">$ npm install hexo-search –save</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<hr>\n\n<h3 id=\"启用统计\"><a href=\"#启用统计\" class=\"headerlink\" title=\"启用统计\"></a>启用统计</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">google_analytics:</span><br><span class=\"line\">baidu_analytics: 57e94d016sfsf1fba3xxxx8a2b0263af0</span><br></pre></td></tr></table></figure>\n<h3 id=\"启用评论\"><a href=\"#启用评论\" class=\"headerlink\" title=\"启用评论\"></a>启用评论</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">disqus_shortname: forsigner</span><br><span class=\"line\"># duoshuo_shortname: forsigner</span><br></pre></td></tr></table></figure>","categories":["APP"],"tags":["Hexo"]},{"title":"about","url":"http://www.ternc.cn/about/index.html","content":"","categories":[],"tags":[]},{"title":"category","url":"http://www.ternc.cn/category/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"http://www.ternc.cn/link/index.html","content":"","categories":[],"tags":[]},{"title":"project","url":"http://www.ternc.cn/project/index.html","content":"","categories":[],"tags":[]},{"title":"","url":"http://www.ternc.cn/search/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"http://www.ternc.cn/tag/index.html","content":"","categories":[],"tags":[]}]